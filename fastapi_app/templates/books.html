{% extends "base.html" %}

{% block title %}–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥{% endblock %}

{% block extra_css %}
<style>
    .page-header {
        margin-bottom: 25px;
    }
    .page-header h2 {
        color: #333;
        margin-bottom: 10px;
    }
    .books-list {
        margin: 25px 0;
    }
    .book-card {
        background: white;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 20px;
        margin: 15px 0;
        transition: box-shadow 0.3s;
    }
    .book-card:hover {
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .book-title {
        font-size: 1.3em;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
    }
    .book-price {
        color: #2e7d32;
        font-weight: bold;
        font-size: 1.2em;
        margin: 10px 0;
    }
    .book-meta {
        color: #666;
        font-size: 0.95em;
        margin: 8px 0;
    }
    .book-description {
        color: #555;
        line-height: 1.5;
        margin: 10px 0;
    }
    .no-books {
        text-align: center;
        padding: 40px 20px;
        color: #666;
    }
    .no-books h3 {
        margin-bottom: 15px;
    }
    .json-link {
        display: inline-block;
        background: #4a6fa5;
        color: white;
        padding: 8px 15px;
        border-radius: 4px;
        text-decoration: none;
        margin: 10px 5px;
    }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h2>üìñ –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</h2>
    <p>–í—Å–µ–≥–æ –∫–Ω–∏–≥: <strong>{{ total_books }}</strong></p>
    <p>–¢–∞–±–ª–∏—Ü–∞: <strong>{{ table_name }}</strong></p>

    <div>
        <a href="/api/books" class="json-link">üìã JSON –≤–µ—Ä—Å–∏—è</a>
        <a href="/" class="json-link" style="background: #666;">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>

<div class="books-list">
    {% if books %}
        {% for book in books %}
        <div class="book-card">
            <div class="book-title">
                {% if book.title %}
                    {{ book.title }}
                {% elif book.name %}
                    {{ book.name }}
                {% else %}
                    –ö–Ω–∏–≥–∞ ID: {{ book.id }}
                {% endif %}
            </div>

            {% if book.price %}
            <div class="book-price">{{ book.price }} ‚ÇΩ</div>
            {% endif %}

            {% if book.author or book.author_name %}
            <div class="book-meta">
                <strong>–ê–≤—Ç–æ—Ä:</strong> {{ book.author or book.author_name }}
            </div>
            {% endif %}

            {% if book.description %}
            <div class="book-description">
                {{ book.description[:200] }}{% if book.description|length > 200 %}...{% endif %}
            </div>
            {% endif %}

            <div class="book-meta" style="color: #999; font-size: 0.85em;">
                {% if book.id %}ID: {{ book.id }}{% endif %}
                {% if book.created_at %} | –î–∞—Ç–∞: {{ book.created_at }}{% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="no-books">
            <h3>üì≠ –ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
            <p>–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –∫–Ω–∏–≥ –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.</p>
            <a href="/" style="color: #4a6fa5; font-weight: bold;">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </div>
    {% endif %}
</div>

<div style="margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 6px;">
    <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
    <p>–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã <strong>{{ table_name }}</strong> –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö <strong>{{ db_name }}</strong>.</p>
    <p>–í—Å–µ–≥–æ –ø–æ–∫–∞–∑–∞–Ω–æ <strong>{{ total_books }}</strong> –∫–Ω–∏–≥.</p>
</div>
{% endblock %}